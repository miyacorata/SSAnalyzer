# SSAnalyzer ショートコード生成設定方法

このファイルでは
[Speech bubble](https://ja.wordpress.org/plugin/speech-bubble/)
向けのショートコードを生成するために必要な設定を解説します。

この設定にはPHPの最低限の知識が必要です。

## 有効化

ショートコード生成を有効化するにはこのファイルと同じディレクトリにある``setting.php``に次を記述・あるいは変更します。

```php
$enable_sc = true;
```

ただし、後述する定義ファイルが存在しない場合ショートコード生成は利用できないことに注意してください。

## このツールで生成できるショートコード

このツールで生成するショートコードは例えば次のようなものです。

```
[speech_bubble type="std" subtype="L1" icon="cg/sachiko.png" name="幸子"]
```

それぞれの属性は次のように振る舞います。

|属性|振る舞い|
|:--:|:--:|
|type|"std"に固定|
|subtype|"L1"に固定|
|icon|定義に応じた適切な画像ファイルを出力|
|name|処理する行に記載されたものを出力|

## 定義ファイル

定義ファイルは、キャラクターごとにSpeech bubbleで利用するアイコンのパスを定義するために必要です。

### 定義ファイルの書き方

定義ファイルは一般的なテキストファイルの形式です。

1つのキャラクターにつき1行で、例えば次のように記述します。

```
輿水幸子,/path/to/icon/sachiko.png
森久保乃々,/path/to/icon/nono.png
```

この定義は2つの要素で構成されます。

|要素|定義|例|
|:--:|:--:|:--:|
|キャラクター名|キャラクターを識別する名前|輿水幸子|
|ファイルパス|そのキャラクターが用いる画像へのファイルパス|/path/to/icon/sachiko.png|

ここで定義するファイルパスは**Speech bubbleのimgディレクトリから見たファイルパス**です。

キャラクター名は、あくまでこの定義ファイルでキャラクターを識別するために必要なものに過ぎず、実際には処理する行に書かれている人物表記が使われます。
例を挙げると、``輿水幸子``と定義されたキャラクターでも、SSにおいて``幸子「台詞」``のように記述されていた場合はSpeech bubbleの名前表記には``幸子``と表示されます。  
つまり、画像を2つ用意し``輿水幸子(笑顔)``と``輿水幸子(不機嫌)``のような定義をすることも可能であるということです。

また、この記述法に合致しない行は無視されます。

定義ファイルを作成したら、``teigi.txt``とファイル名をつけて**エンコードをUTF-8にした上で**テキストファイルとして保存し、``setting.php``と同じディレクトリに配置します。
